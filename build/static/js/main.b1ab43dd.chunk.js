(this["webpackJsonpmovies-keeper"]=this["webpackJsonpmovies-keeper"]||[]).push([[0],{22:function(e,t,a){e.exports=a(35)},27:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),s=a.n(r),i=(a(27),a(12)),l=a(1),o=a(13),m=a.n(o),u=a(16),f=a(20),h=a(6),v="fec8b5ab27b292a68294261bb21b04a5",d="http://api.themoviedb.org/3/",p=function(e){return null===e.poster_path?"no-poster.jpg":"https://image.tmdb.org/t/p/w300"+e.poster_path},b=function(e){return"YouTube"===e.site?"https://www.youtube.com/watch?v=".concat(e.key):"Vimeo"===e.site?"https://vimeo.com/".concat(e.key):"#"},E=c.a.createContext({favorites_list:JSON.parse(localStorage.getItem("favorites_list")||"{}"),favorites_list_set:function(e,t){return this.favorites_list[e.id]||t?(delete this.favorites_list[e.id],this.save(),!1):(this.favorites_list[e.id]={id:e.id,title:e.title,poster_path:e.poster_path},this.save(),!0)},watch_list:JSON.parse(localStorage.getItem("watch_list")||"{}"),watch_list_set:function(e,t){return this.watch_list[e.id]||t?(delete this.watch_list[e.id],this.save(),!1):(this.watch_list[e.id]={id:e.id,title:e.title,poster_path:e.poster_path},this.save(),!0)},save:function(){localStorage.setItem("favorites_list",JSON.stringify(this.favorites_list)),localStorage.setItem("watch_list",JSON.stringify(this.watch_list))}}),g=function(e){var t=e.movieId,a=e.onClose,r=e.movieItem,s=Object(n.useContext)(E),i=Object(n.useState)(null),l=Object(h.a)(i,2),o=l[0],m=l[1],u=Object(n.useState)(null),f=Object(h.a)(u,2),g=f[0],_=f[1];return Object(n.useEffect)((function(){if(!t&&r)return t=r.id,void m(r);var e;(e=t,fetch("".concat(d,"movie/").concat(e,"?api_key=").concat(v))).then((function(e){return e.json().then((function(e){m(e),function(e){return fetch("".concat(d,"movie/").concat(e,"/videos?api_key=").concat(v))}(t).then((function(e){return e.json().then((function(e){_(e.results)}))}))}))}))}),[]),c.a.createElement("div",{className:"movie-details"},c.a.createElement("span",{className:"x-squar-fill-icon",onClick:a}),o?c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("p",{style:{textAlign:"center"}},c.a.createElement("img",{src:p(o),width:"250"}))," "),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("div",{className:"card",style:{border:"none",background:"none"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},o.title,"(",new Date(o.release_date).getFullYear(),")"),c.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},o.release_date,"\xa0",c.a.createElement("br",null),o.genres?o.genres.map((function(e,t){return c.a.createElement("span",{key:t},"\xa0|\xa0",c.a.createElement("a",null,e.name))})):""),c.a.createElement("p",{className:"card-text",style:{textAlign:"justify"}},o.overview),c.a.createElement("a",{href:"#",className:"btn btn-sm btn-primary",onClick:function(e){s.watch_list_set(o)?e.target.innerHTML="Remove from watch list":e.target.innerHTML="Add to watch list"}},s.watch_list[o.id]?"Remove from watch list":"Add to watch list"),"\xa0",c.a.createElement("a",{href:"#",className:"btn  btn-sm btn-info",onClick:function(e){s.favorites_list_set(o)?e.target.innerHTML="Remove from faviorate":e.target.innerHTML="Add to favorites"}},s.favorites_list[o.id]?"Remove from favorites":"Add to faviorates"),c.a.createElement("h5",null,c.a.createElement("br",null)," Trailers"),g?g.map((function(e,t){return c.a.createElement("span",{key:t},"\xa0",c.a.createElement("a",{target:"_blank",href:b(e)},e.site),c.a.createElement("br",null))})):"")))):c.a.createElement("div",{className:"spinner-border"},c.a.createElement("span",{className:"sr-only"})))},_=function(e){var t,a=e.list,r=e.loading,s=e.fetchMore,i=Object(n.useContext)(E),l=Object(n.useState)(null),o=Object(h.a)(l,2),m=o[0],u=o[1],f=Object(n.useRef)(),v=Object(n.useRef)(),d=function(){if(f.current.scrollTop+window.innerHeight>v.current.clientHeight){if(r|Date.now()-t<1e3)return;t=Date.now(),s&&s()}};return Object(n.useEffect)((function(){return t=0,f.current.addEventListener("scroll",d),function(){f.current.removeEventListener("scroll",d)}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"movie-list-area",ref:f},c.a.createElement("ul",{ref:v,className:"list-unstyled"},a&&a.map((function(e,t){return c.a.createElement("li",{key:t,className:"media col-sm-6"},c.a.createElement("img",{src:p(e),onClick:function(){return u(e.id)}}),c.a.createElement("div",{className:"media-body"},c.a.createElement("h6",{className:"media-title",onClick:function(){return u(e.id)}}," ",e.title),c.a.createElement("span",{role:"fav-icon",className:i.favorites_list[e.id]?"fill-star-icon":"star-icon",onClick:function(t){t.target.classList.remove("star-icon"),t.target.classList.remove("fill-star-icon"),i.favorites_list_set(e)?t.target.classList.add("fill-star-icon"):t.target.classList.add("star-icon")}})))})),r&&c.a.createElement("li",{className:"media col-sm-6"},"Loading..."))),m?c.a.createElement(g,{movieId:m,onClose:function(){return u(null)}}):"")},w=function(){var e,t=Object(l.e)(),a=Object(n.useState)(!1),r=Object(h.a)(a,2),s=r[0],i=r[1],o=Object(n.useState)([]),p=Object(h.a)(o,2),b=p[0],E=p[1],g=1,w=1,N=function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=a||e,!(g>w)){t.next=3;break}return t.abrupt("return");case 3:return e=a,i(!0),console.log("search_text",e),n=e?"".concat(d,"search/movie?api_key=").concat(v,"&query=").concat(a,"&page=").concat(g):"".concat(d,"movie/upcoming?api_key=").concat(v,"&page=").concat(g),t.next=9,fetch(n);case 9:t.sent.json().then((function(e){w=e.total_pages,g=e.page+1,E((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.results))})),i(!1)}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){g=1,w=1,E([]),t.hash?N(t.hash.replace("#","")):N()}),[]),c.a.createElement(_,{fetchMore:N,list:b,loading:s})},N=function(e){e.onSearch;var t=Object(n.useState)(""),a=Object(h.a)(t,2),r=a[0],s=a[1],i=Object(n.useRef)();return c.a.createElement("div",{className:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},c.a.createElement("a",{className:"navbar-brand",href:"#"},c.a.createElement("img",{role:"app-logo",src:"tickets.svg",width:"26",height:"26",className:"d-inline-block align-top",alt:""}),"\xa0MovieKeeper"),c.a.createElement("button",{className:"navbar-toggler",onClick:function(e){return i.current.classList.toggle("collapse")},type:"button"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",ref:i},c.a.createElement("ul",{className:"navbar-nav  mr-auto",onClick:function(e){i.current.classList.add("collapse")}},c.a.createElement("li",{className:"nav-item "},c.a.createElement("a",{className:"nav-link",href:"/index.html"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link",href:"#favorites"},"My Favorites")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link",href:"#watchlist"},"Watch List"))),c.a.createElement("form",{className:"form-inline my-2 my-lg-0",onSubmit:function(){i.current.classList.add("collapse"),window.location.hash="search#".concat(r)}},c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("input",{type:"text",className:"form-control",value:r,onChange:function(e){s(e.target.value)},placeholder:"Movie title"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-secondary",type:"submit"},"Search"))))))},j=function(e){e.list,e.loading,e.fetchMore;var t=Object(n.useContext)(E);return console.log("context.favorites_list",t.favorites_list),c.a.createElement(_,{list:Object.entries(t.favorites_list).map((function(e){return e[1]}))})},k=function(e){e.list,e.loading,e.fetchMore;var t=Object(n.useContext)(E);return c.a.createElement(_,{list:Object.entries(t.watch_list).map((function(e){return e[1]}))})},O=(a(34),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(N,null),c.a.createElement(E.Provider,{value:Object(n.useContext)(E)},c.a.createElement(i.a,{basename:"index.html"},c.a.createElement(l.a,{path:"/favorites",exact:!0,strict:!0,component:j}),c.a.createElement(l.a,{path:"/watchlist",exact:!0,strict:!0,component:k}),c.a.createElement(l.a,{path:"/search",exact:!0,component:w}),c.a.createElement(l.a,{path:"/",exact:!0,component:w}),c.a.createElement(l.a,{path:"/search:text",component:w}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.b1ab43dd.chunk.js.map